<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>

    <link rel="stylesheet" href="css/index.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="js/date-min.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(draw);

      function draw() {
        const data = new google.visualization.DataTable();
          data.addColumn('string', 'trade date');
          data.addColumn('number', '기관');
          data.addColumn('number', '외인');
          data.addColumn('number', '합');

		  tradeList = [];
		<% todayBestTradeList.forEach((elem) => { %>
			tradeList.push({TradeDate: convertDateToMonthDays('<%= elem.TradeDate %>'), InstitutionsVolume: <%= elem.InstitutionsVolume %>, ForeignersVolume: <%= elem.ForeignersVolume %>});
		<% }) %>
          tradeList.reverse();
          tradeList.forEach((elem) => {
              data.addRow([elem.TradeDate, elem.InstitutionsVolume, elem.ForeignersVolume, elem.InstitutionsVolume+elem.ForeignersVolume])
          });      

        const options = {
          title : '기관과 외인 거래량',
          vAxis: {title: 'volume'},
          hAxis: {title: 'trade date'},
          seriesType: 'bars',
          series: {2: {type: 'line'}}
        };

        const chart = new google.visualization.ComboChart(document.getElementById('best_stock_chart'));
        chart.draw(data, options);
      }
    </script>
</head>
<body>
    <header>
        <div class="header_logo">
            <a href="/"><img src="logo.png" alt="LAYNET"></a>
            <a href="/" class="a_block">LAYNET</a>
        </div>
        <section class="header_nav">
            <nav class="header_nav_menu">
                <ul>
                    <li><a href="/">오늘의 추천 종목들</a></li>
                    <li><a href="/">코스피200</a></li>
                </ul>
            </nav>
            <nav class="header_nav_tools">
                <ul>
                    <li><a href="/">사이트맵</a></li>
                    <li><a href="/">About</a></li>
                </ul>                
            </nav>
        </section>        
    </header>
    <main>
        <section class="content">
            <div id="best_stock_desc">
               <h2><strong style="color:dimgray;"><%= baseDate %></strong> 추천 종목 : <strong style="color:crimson"><%= todayBestTradeList[0].CompanyName %></strong></h2>
            </div>
            <div id="best_stock_chart">
            </div>
            <div id="caution">
                <img src="caution.png">
                <p>이 투자정보를 사용하여 발생하는 모든 결과에 대한 책임은 투자자 본인에게 있습니다.</p>
            </div>
            <div id="past_best_stocks">
                <h2><span>과거 추천 종목들</span></h2>
                <table>
                   <colgroup>
                       <col width="100">
                       <col width="160">
                       <col width="90">
                       <col width="100">
                       <col width="90">
                       <col width="70">
                       <col width="70">
                   </colgroup>
                    <thead>
                        <tr>
                            <th>추천일</th>
                            <th>종목</th>
                            <th>당시가</th>
                            <th>최고달성일</th>
                            <th>최고달성가</th>
                            <th>증가량</th>
                            <th>퍼센트</th>
                        </tr>                        
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                        </tr>
                        <tr>
                            <th>2018/10/16</th>
                            <td style="color: firebrick">ABCD</td>
                            <td>404400</td>
                            <td>2018/10/22</td>
                            <td style="color: firebrick">425600</td>
                            <td style="color: firebrick">+21200</td>
                            <td style="color: firebrick">+5.2%</td>
                        </tr>
                        <tr>
                            <th>2018/10/12</th>
                            <td style="color: deeppink">EFGH</td>
                            <td>13000</td>
                            <td>2018/10/17</td>
                            <td style="color: deeppink">18000</td>
                            <td style="color: deeppink">+5000</td>
                            <td style="color: deeppink">+38.0%</td>
                        </tr>
                        <tr>
                            <th>2018/09/08</th>
                            <td style="color: red">JKRM</td>
                            <td>111000</td>
                            <td>2018/10/17</td>
                            <td style="color: red">125600</td>
                            <td style="color: red">+14600</td>
                            <td style="color: red">+13.1%</td>
                        </tr>        
                        <tr>
                            <th>2018/10/12</th>
                            <td>ABCD</td>
                            <td>13000</td>
                            <td>2018/10/17</td>
                            <td>18000</td>
                            <td>+5000</td>
                            <td>+38.0%</td>
                        </tr>
                        <tr>
                            <th>2018/10/16</th>
                            <td>EFGH</td>
                            <td>104400</td>
                            <td>2018/10/22</td>
                            <td>105600</td>
                            <td>+1200</td>
                            <td>+1.1%</td>
                        </tr>        
                        <tr>
                            <th>2018/10/12</th>
                            <td>JKRM</td>
                                <td>13000</td>
                            <td>2018/10/17</td>
                            <td>18000</td>
                            <td>+5000</td>
                            <td>+38.0%</td>
                        </tr>
                        <tr>
                            <th>2018/10/16</th>
                            <td>ABCD</td>
                            <td>104400</td>
                            <td>2018/10/22</td>
                            <td>105600</td>
                            <td>+1200</td>
                            <td>+1.1%</td>
                        </tr>        
                        <tr>
                            <th>2018/10/11</th>
                            <td>EFGH</td>
                            <td>13000</td>
                            <td>2018/10/17</td>
                            <td>18000</td>
                            <td>+5000</td>
                            <td>+38.0%</td>
                        </tr>    
                        <tr>
                            <td></td>
                        </tr>                        
                    </tbody>
                </table>
            </div>
            <div id="box4">box4</div>
            <div id="box5">box5</div>
            <div id="box6">box6</div>
        </section>
    </main>
    <footer>   
        stock analysis site
    </footer>
</body>
</html>