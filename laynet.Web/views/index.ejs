<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>

    <link rel="stylesheet" href="css/index.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="js/date-min.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(draw);

      function draw() {
        const data = new google.visualization.DataTable();
          data.addColumn('string', 'trade date');
          data.addColumn('number', '기관');
          data.addColumn('number', '외인');
          data.addColumn('number', '합');

		  tradeList = [];
		<% todayBestTradeList.forEach((elem) => { %>
			tradeList.push({TradeDate: convertDateToMonthDays('<%= elem.TradeDate %>'), InstitutionsVolume: <%= elem.InstitutionsVolume %>, ForeignersVolume: <%= elem.ForeignersVolume %>});
		<% }) %>
          tradeList.reverse();
          tradeList.forEach((elem) => {
              data.addRow([elem.TradeDate, elem.InstitutionsVolume, elem.ForeignersVolume, elem.InstitutionsVolume+elem.ForeignersVolume])
          });      

        const options = {
          title : '기관과 외인 거래량',
          vAxis: {title: 'volume'},
          hAxis: {title: 'trade date'},
          seriesType: 'bars',
          series: {2: {type: 'line'}}
        };

        const chart = new google.visualization.ComboChart(document.getElementById('best_stock_chart'));
        chart.draw(data, options);
      }
    </script>
</head>
<body>
    <header>
        <div class="header_logo">
            <a href="/"><img src="logo.png" alt="LAYNET"></a>
            <a href="/" class="a_block">LAYNET</a>
        </div>
        <section class="header_nav">
            <nav class="header_nav_menu">
                <ul>
                    <li><a href="/">오늘의 추천 종목들</a></li>
                    <li><a href="/">코스피200</a></li>
                </ul>
            </nav>
            <nav class="header_nav_tools">
                <ul>
                    <li><a href="/">사이트맵</a></li>
                    <li><a href="/">About</a></li>
                </ul>                
            </nav>
        </section>        
    </header>
    <main>
        <section class="content">
            <div id="best_stock_desc">
               <h2><strong style="color:dimgray;"><%= baseDate %></strong> 추천 종목 : <strong style="color:crimson"><%= todayBestTradeList[0].CompanyName %></strong></h2>
            </div>
            <div id="best_stock_chart">
            </div>
            <div id="caution">
                <img src="caution.png">
                <p>이 투자정보를 사용하여 발생하는 모든 결과에 대한 책임은 투자자 본인에게 있습니다.</p>
            </div>
            <div id="box3">box3</div>
            <div id="box4">box4</div>
            <div id="box5">box5</div>
            <div id="box6">box6</div>
        </section>
    </main>
    <footer>   
        stock analysis site
    </footer>
</body>
</html>